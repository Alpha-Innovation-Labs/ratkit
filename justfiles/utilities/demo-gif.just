# Convert interactive demo to GIF (requires agg)
# Usage: just demo-gif
# Example: just demo-gif

demo-gif:
    #!/usr/bin/env bash
    set -euo pipefail

    echo "ğŸ¨ Converting ratatui-toolkit-demo.cast to GIF..."

    mkdir -p demo

    if [ ! -f demo/ratatui-toolkit-demo.cast ]; then
        echo "âŒ Error: demo/ratatui-toolkit-demo.cast not found. Run 'just demo-interactive' first"
        exit 1
    fi

    if ! command -v agg >/dev/null 2>&1; then
        echo "âš ï¸  agg not found. Installing..."
        cargo install --git https://github.com/asciinema/agg
    fi

    agg demo/ratatui-toolkit-demo.cast demo/ratatui-toolkit-demo.gif
    echo "âœ… GIF created: demo/ratatui-toolkit-demo.gif"
    echo "ğŸ“Š File size: $(du -h demo/ratatui-toolkit-demo.gif | cut -f1)"
